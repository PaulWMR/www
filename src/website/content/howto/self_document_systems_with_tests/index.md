---
layout: howto
title: "Self Document Systems with Tests"
description: Recipe for creating a Distributed Tracing Tree
ecosystem: http4k Core
---
### Gradle setup

```kotlin
dependencies {
    {{< http4k_bom >}}
    implementation("org.http4k:http4k-core")
    testImplementation("org.http4k:http4k-testing-tracerbullet")
}
```

When composing several http4k services together and talking to Fakes representing external systems, we can use a combination of request tracing filters (utilising distributed tracing headers) and the http4k event stream to capture and record events. This stream can be stored to disk or outputted to various rendered formats such as [PlantUML] or [Mermaid]. 

<img class="imageMid" alt="PlantUML generated by the test code below" 
src="/images/diagram.jpg">

#### Code

{{< kotlin file="example.kt" >}}

[PlantUML]: https://plantuml.com/
[Mermaid]: https://mermaid.js.org/
